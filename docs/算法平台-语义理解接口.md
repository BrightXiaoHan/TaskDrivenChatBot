# 算法平台-语义理解接口文档

## 语义理解模型训练
训练请求参数、返回参数以及训练数据格式参考 [算法平台训练接口-语义理解单元](算法平台训练接口-多轮.md "语义理解单元")

## 语义理解请求接口
请求方法

http://{ip}:{port}/xiaoyu/analyze

参数说明

| 参数名称 | 参数类型 | 参数描述                                        |
| -------- | -------- | ----------------------------------------------- |
| robot_id | str      | 标识当前多轮对话nlu数据属于哪个机器人，机器人的唯一标识 |
| text     | str      | 待分析理解的文本                        |

请求示例
```
POST http://{ip}:{port}/xiaoyu/multi/nlu HTTP/1.1
Content-Type: application/json

{
    "robot_id": "robot_one",
    "text": "我的车牌号码是粤A23456"
}
```

返回参数

| 参数名称 | 参数类型 | 参数描述                                |
| -------- | -------- | --------------------------------------- |
| status   | str      | 服务状态码，200为请求成功，500为系统内部错误 |
| msg     | str     | 如果状态码是200则返回“请求成功”，如果状态码是500则返回错误堆栈信息，方便调试              |
| data     | dict      | 文本的分析结果，只有在`status`为200时会返回此番薯             |

`data`参数格式

| 参数名称 | 参数类型 | 参数描述                                |
| -------- | -------- | --------------------------------------- |
| intent   | str      | 意图分类结果 |
| intent_confidence | float | 分类的置信度，数值范围为0-1之间  |
| entities     | dict     | key为实体的类别，value为该类别实体的列表             |
| sentiment     | float      | 情感分析结果，数值范围为0-1之间，0为完全负面，1为完全正面          |

返回示例
```json
{
    "status": "200",
    "msg": "请求成功",
    "data": {
        "intent": "car_number",
        "intent_confidence": "0.9",
        "entities": {
            "plate_number": ["粤A23456"]
        },
        "sentiment": 0.6
    }
}
```