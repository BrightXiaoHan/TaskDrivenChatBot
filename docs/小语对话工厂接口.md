 

# 一、 通用配置

## 1、URL地址通用前缀：

```
http://ip:port/
```

## 2、通用Header参数：

```
Content-Type:application/json

Authorization:XXXXXXXXXXXXXX     Authorization的值，通过请求登陆验证接口进行获取
```



## 3、通用返回参数：

| 参数名 | 必填 | 类型   | 说明            |
| ------ | ---- | ------ | --------------- |
| code   | 是   | Int    | 状态码,见附表一 |
| msg    | 是   | String | 返回消息内容    |
| data   | 否   | Object | 返回数据对象    |

示例：

```
{

“code”：200

“msg”: "操作成功"

}
```



# 二、 登陆验证接口

1、描述：调用接口的第三方系统登陆验证。

2、请求地址：http://ip:post/api/v1/verify/

3、请求方式：post

4、请求参数：

| 参数名    | 必填 | 类型   | 说明     |
| --------- | ---- | ------ | -------- |
| appCode   | 是   | String | 应用编码 |
| apiSecret | 是   | String | 应用密钥 |

5、data返回值

| 参数名 | 必填 | 类型   | 说明    |
| ------ | ---- | ------ | ------- |
| token  | 是   | String | Token值 |

# 三、 对话接口

6、描述：保存算法平台在多轮对话、FAQ、闲聊等与用户交互的对话信息。

7、请求地址：http://ip:post/api/v1/dialog/record/

8、请求方式：Post

9、请求参数：

| 参数名         | 必填 | 类型   | 说明                                                         |
| -------------- | ---- | ------ | ------------------------------------------------------------ |
| id             | 是   | String | 对话ID,由算法平台生成                                        |
| busiId         | 是   | String | 业务ID                                                       |
| robot          | 是   | String | 机器人编码                                                   |
| algorithmPlat  | 是   | String | 算法平台编码                                                 |
| source         | 是   | String | 对话来源（1手机、2固话、5互联网、10第三方业务系统）          |
| souceMark      | 是   | String | 对话来源标识（手机标识、固话:电话码号，互联网:ip地址，第三方业务系统:业务系统ID) |
| startTime      | 是   | String | 对话开始时间，时间格式：”yyyy-MM-dd HH:mm:ss”                |
| endTime        | 是   | String | 对话结束时间，时间格式：”yyyy-MM-dd HH:mm:ss”                |
| status         | 是   | String | 算法平台对话状态                                             |
| businessStatus | 否   | String | 业务系统-业务状态                                            |
| province       | 否   | String | 用户所在省份                                                 |
| city           | 否   | String | 用户所在城市                                                 |
| district       | 否   | String | 用户所在县区                                                 |
| dialog         | 是   | Object | 对话信息，有globalSlots元素和details元素                     |

globalSlots元素

| 参数名 | 必填 | 类型   | 说明           |
| ------ | ---- | ------ | -------------- |
| code   | 是   | String | 对话流程编码   |
| key    | 是   | String | 词槽关键字名称 |
| name   | 是   | String | 词槽名称       |
| value  | 是   | String | 词槽填充的值   |

details元素

| 参数名          | 必填 | 类型   | 说明                                        |
| --------------- | ---- | ------ | ------------------------------------------- |
| code            | 否   | String | 对话流程编码，多轮对话才有值                |
| nodeId          | 否   | String | 对话流程节点ID，多轮对话才有值              |
| type            | 是   | String | 问答类型：1、一问一答/2、多轮对话/3、闲聊   |
| speaker         | 是   | String | 对话说的对象：1、用户/2、机器人/3、人工客服 |
| time            | 是   | String | 对话时间，时间格式：”yyyy-MM-dd HH:mm:ss”   |
| context         | 是   | String | 对话内容                                    |
| understanding   | 否   | String | NLP是否理解用户意图：1、己理解/2、未理解    |
| intent          | 否   | String | NLP理解用户意图                             |
| candidateIntent | 否   | String | NLP理解用候选意图                           |
| slots           | 否   | Object | NLP理解的词槽信息，见                       |

slots对象

| 参数名 | 必填 | 类型   | 说明           |
| ------ | ---- | ------ | -------------- |
| key    | 是   | String | 词槽关键字名称 |
| name   | 是   | String | 词槽名称       |
| value  | 是   | String | 词槽填充的值   |

示例：

```
{

"id":"",

"busiId":"业务ID"

"robot":"*机器人编码",

"algorithmPlat":"*算法平台编码",

"source":"1",

"sourceMark":"18825908094",

  "startTime":"*对话开始时间",

  "endTime":"*对话结束时间",

  "province":"用户所在省份",

  "city":"用户所在城市",

  "district":"用户所在县区",

  "status":"*服务状态",

  "businessStatus":"业务状态",

  "dialog":{

​    "globalSlots":[

​      {

​        "code":"对话流程编码",

​        "key":"词槽关键字",

​        "value":"抽取填充的实体"

​      }

​    ],

​    "details":[

​      {

​        "code": "对话流程编码",

​        "nodeId":"节点ID",

​        "type": "1-一问一答/2-多轮对话/3-闲聊",

​        "speaker":"1-用户/2-机器人",

​        "time":"时间-(年-月-日 时:分:秒)",

​        "context":"内容",

​        "understanding":"1-己理解/2-未理解",

​        "intent":"理解意图",

​        "candidateIntent": "候选意图",

​        "slots":[

​          {

​            "key":"词槽关键字",

​            "value":"抽取填充的实体"

​          }

​        ]

​      }

​    ]

  }

}
```



# 四、 算法平台监控接口

1、描述：监控算法平台在运行过程中的错误信息。

2、请求地址：http://ip:post/api/v1/monitor/algorithm/error

3、请求方式：Post

4、请求参数：

| 参数名  | 必填 | 类型   | 说明         |
| ------- | ---- | ------ | ------------ |
| code    | 是   | String | 算法平台编码 |
| type    | 是   | String | 错误类型     |
| context | 是   | String | 错误信息     |

# 五、 算法平台未接收到请求接口

1、描述：监控算法平台在运行过程中未接收到请求

2、请求地址：http://ip:post/api/v1/monitor/algorithm/request

3、请求方式：Post

4、请求参数：

| 参数名  | 必填 | 类型   | 说明                       |
| ------- | ---- | ------ | -------------------------- |
| code    | 是   | String | 算法平台编码               |
| type    | 是   | String | 统计类型，如：未接到到请求 |
| context | 是   | String | 统计数据，如多少分钟       |

# 六、 接收算法平台训练完成接口

1、描述：接收算法平台FAQ、意图、多轮对话训练结果请求

2、请求地址：http://ip:post/api/v1/algorithm/train/result

3、请求方式：Post

4、请求参数：

| 参数名  | 必填 | 类型   | 说明         |
| ------- | ---- | ------ | ------------ |
| algorithmCode    | 是   | String | 算法平台编码 |
| robotId | 是   | String | 机器人ID     |
| version | 是   | String | 训练版本号   |
| code    | 是   | String | 训练结果编码 |
| msg     | 是   | String | 训练结果信息 |

 
